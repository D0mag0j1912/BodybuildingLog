<ng-container *ngIf="exerciseControl.value">
    <form *ngFor="let group of form.controls; let i = index;" [formGroup]="group">
        <bl-set
            #set
            [form]="group"
            [preferences]="preferences$ | async"
            [activeSetCategory]="selectedSetCategoriesControl.value[i]"
            [exerciseControl]="exerciseControl"
            [availableSetCategoriesControl]="availableSetCategoriesControl"
            [editTrainingData]="editTrainingData"
            [isLoading]="isLoading"
            [isFirstSet]="i === 0"
            (setChanged)="onSetChanged($event, i)"
            (setDeleted)="onSetDeleted(i)"
            (setConstituentKeydownEmitted)="onSetConstituentKeydownEmit($event, i)"
            (setCategoryModalOpened)="onUpdateSetCategory($event, i)"
            (setDurationUnitChanged)="onSetDurationUnitChange($event)"></bl-set>
    </form>
</ng-container>
<ion-grid>
    <ion-row class="ion-text-center">
        <ion-col>
            <ion-button
                class="add-set-btn"
                type="button"
                color="primary"
                [disabled]="!exerciseControl.value || !form.valid"
                (click)="addSet()"
            >
                {{ 'training.new_training.buttons.add_set' | translate }}
            </ion-button>
        </ion-col>
    </ion-row>
</ion-grid>
