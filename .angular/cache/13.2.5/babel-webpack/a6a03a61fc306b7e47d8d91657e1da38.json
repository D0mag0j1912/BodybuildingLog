{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Development\\\\trainingApk\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./header.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./header.component.scss?ngResource\";\nimport { ChangeDetectionStrategy, Component, EventEmitter, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { format } from 'date-fns';\nimport { switchMap, take } from 'rxjs/operators';\nimport { QUERY_PARAMS_DATE_FORMAT } from '../../../models/training/past-trainings/past-trainings.model';\nimport { AuthService } from '../../../services/auth/auth.service';\nimport { NavigationService } from '../../../services/shared/navigation.service';\nimport { SharedService } from '../../../services/shared/shared.service';\nimport { NewTrainingService } from '../../../services/training/new-training.service';\nimport { constructDates } from '../../../helpers/dates.helper';\nimport { LocalStorageItems } from '../../../models/common/interfaces/common.model';\nlet HeaderComponent = class HeaderComponent {\n  constructor(newTrainingService, authService, sharedService, navigationService, router) {\n    this.newTrainingService = newTrainingService;\n    this.authService = authService;\n    this.sharedService = sharedService;\n    this.navigationService = navigationService;\n    this.router = router;\n    this.myMatchOptions = {\n      queryParams: 'ignored',\n      matrixParams: 'exact',\n      paths: 'exact',\n      fragment: 'exact'\n    };\n    this.toggleSideNav = new EventEmitter();\n  }\n\n  get StartDate() {\n    var _a, _b;\n\n    return format((_b = (_a = constructDates(new Date())) === null || _a === void 0 ? void 0 : _a.StartDate) !== null && _b !== void 0 ? _b : new Date(), QUERY_PARAMS_DATE_FORMAT);\n  }\n\n  get EndDate() {\n    var _a, _b;\n\n    return format((_b = (_a = constructDates(new Date())) === null || _a === void 0 ? void 0 : _a.EndDate) !== null && _b !== void 0 ? _b : new Date(), QUERY_PARAMS_DATE_FORMAT);\n  }\n\n  ngOnInit() {\n    this.isAuthenticated$ = this.authService.isAuth$;\n    this.loggedUserData$ = this.authService.loggedUser$;\n    this.isEditing$ = this.sharedService.editingTraining$$;\n  }\n\n  onLogout() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.newTrainingService.clearTrainingData();\n\n      yield _this.authService.logout();\n    })();\n  }\n\n  goToPastTraining() {\n    var _this2 = this;\n\n    this.sharedService.pastTrainingsQueryParams$$.pipe(take(1)).subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        yield _this2.router.navigate(['/training/past-trainings'], {\n          queryParams: {\n            startDate: (response === null || response === void 0 ? void 0 : response.startDate) ? response.startDate : undefined,\n            endDate: (response === null || response === void 0 ? void 0 : response.endDate) ? response.endDate : undefined,\n            search: (response === null || response === void 0 ? void 0 : response.search) ? response.search : undefined,\n            page: (response === null || response === void 0 ? void 0 : response.page) ? response.page : undefined,\n            size: (response === null || response === void 0 ? void 0 : response.size) ? response.size : undefined\n          }\n        });\n        localStorage.removeItem(LocalStorageItems.QUERY_PARAMS);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  onToggle() {\n    this.toggleSideNav.emit();\n  }\n\n  changeLanguage(language) {\n    this.authService.loggedUser$.pipe(take(1), switchMap(userData => this.navigationService.setPreferences(userData._id, language, 'kg'))).subscribe();\n  }\n\n};\n\nHeaderComponent.ctorParameters = () => [{\n  type: NewTrainingService\n}, {\n  type: AuthService\n}, {\n  type: SharedService\n}, {\n  type: NavigationService\n}, {\n  type: Router\n}];\n\nHeaderComponent.propDecorators = {\n  toggleSideNav: [{\n    type: Output\n  }]\n};\nHeaderComponent = __decorate([Component({\n  selector: 'bl-header',\n  template: __NG_CLI_RESOURCE__0,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeaderComponent);\nexport { HeaderComponent };","map":{"version":3,"sources":["C:/Development/trainingApk/src/app/views/navigation/header/header.component.ts"],"names":["__decorate","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","ChangeDetectionStrategy","Component","EventEmitter","Output","Router","format","switchMap","take","QUERY_PARAMS_DATE_FORMAT","AuthService","NavigationService","SharedService","NewTrainingService","constructDates","LocalStorageItems","HeaderComponent","constructor","newTrainingService","authService","sharedService","navigationService","router","myMatchOptions","queryParams","matrixParams","paths","fragment","toggleSideNav","StartDate","_a","_b","Date","EndDate","ngOnInit","isAuthenticated$","isAuth$","loggedUserData$","loggedUser$","isEditing$","editingTraining$$","onLogout","clearTrainingData","logout","goToPastTraining","pastTrainingsQueryParams$$","pipe","subscribe","response","navigate","startDate","undefined","endDate","search","page","size","localStorage","removeItem","QUERY_PARAMS","onToggle","emit","changeLanguage","language","userData","setPreferences","_id","ctorParameters","type","propDecorators","selector","template","changeDetection","OnPush","styles"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport __NG_CLI_RESOURCE__0 from \"./header.component.html?ngResource\";\r\nimport __NG_CLI_RESOURCE__1 from \"./header.component.scss?ngResource\";\r\nimport { ChangeDetectionStrategy, Component, EventEmitter, Output } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { format } from 'date-fns';\r\nimport { switchMap, take } from 'rxjs/operators';\r\nimport { QUERY_PARAMS_DATE_FORMAT } from '../../../models/training/past-trainings/past-trainings.model';\r\nimport { AuthService } from '../../../services/auth/auth.service';\r\nimport { NavigationService } from '../../../services/shared/navigation.service';\r\nimport { SharedService } from '../../../services/shared/shared.service';\r\nimport { NewTrainingService } from '../../../services/training/new-training.service';\r\nimport { constructDates } from '../../../helpers/dates.helper';\r\nimport { LocalStorageItems } from '../../../models/common/interfaces/common.model';\r\nlet HeaderComponent = class HeaderComponent {\r\n    constructor(newTrainingService, authService, sharedService, navigationService, router) {\r\n        this.newTrainingService = newTrainingService;\r\n        this.authService = authService;\r\n        this.sharedService = sharedService;\r\n        this.navigationService = navigationService;\r\n        this.router = router;\r\n        this.myMatchOptions = {\r\n            queryParams: 'ignored',\r\n            matrixParams: 'exact',\r\n            paths: 'exact',\r\n            fragment: 'exact',\r\n        };\r\n        this.toggleSideNav = new EventEmitter();\r\n    }\r\n    get StartDate() {\r\n        var _a, _b;\r\n        return format((_b = (_a = constructDates(new Date())) === null || _a === void 0 ? void 0 : _a.StartDate) !== null && _b !== void 0 ? _b : new Date(), QUERY_PARAMS_DATE_FORMAT);\r\n    }\r\n    get EndDate() {\r\n        var _a, _b;\r\n        return format((_b = (_a = constructDates(new Date())) === null || _a === void 0 ? void 0 : _a.EndDate) !== null && _b !== void 0 ? _b : new Date(), QUERY_PARAMS_DATE_FORMAT);\r\n    }\r\n    ngOnInit() {\r\n        this.isAuthenticated$ = this.authService.isAuth$;\r\n        this.loggedUserData$ = this.authService.loggedUser$;\r\n        this.isEditing$ = this.sharedService.editingTraining$$;\r\n    }\r\n    async onLogout() {\r\n        this.newTrainingService.clearTrainingData();\r\n        await this.authService.logout();\r\n    }\r\n    goToPastTraining() {\r\n        this.sharedService.pastTrainingsQueryParams$$\r\n            .pipe(take(1)).subscribe(async (response) => {\r\n            await this.router.navigate(['/training/past-trainings'], {\r\n                queryParams: {\r\n                    startDate: (response === null || response === void 0 ? void 0 : response.startDate) ? response.startDate : undefined,\r\n                    endDate: (response === null || response === void 0 ? void 0 : response.endDate) ? response.endDate : undefined,\r\n                    search: (response === null || response === void 0 ? void 0 : response.search) ? response.search : undefined,\r\n                    page: (response === null || response === void 0 ? void 0 : response.page) ? response.page : undefined,\r\n                    size: (response === null || response === void 0 ? void 0 : response.size) ? response.size : undefined,\r\n                },\r\n            });\r\n            localStorage.removeItem(LocalStorageItems.QUERY_PARAMS);\r\n        });\r\n    }\r\n    onToggle() {\r\n        this.toggleSideNav.emit();\r\n    }\r\n    changeLanguage(language) {\r\n        this.authService.loggedUser$.pipe(take(1), switchMap((userData) => this.navigationService.setPreferences(userData._id, language, 'kg'))).subscribe();\r\n    }\r\n};\r\nHeaderComponent.ctorParameters = () => [\r\n    { type: NewTrainingService },\r\n    { type: AuthService },\r\n    { type: SharedService },\r\n    { type: NavigationService },\r\n    { type: Router }\r\n];\r\nHeaderComponent.propDecorators = {\r\n    toggleSideNav: [{ type: Output }]\r\n};\r\nHeaderComponent = __decorate([\r\n    Component({\r\n        selector: 'bl-header',\r\n        template: __NG_CLI_RESOURCE__0,\r\n        changeDetection: ChangeDetectionStrategy.OnPush,\r\n        styles: [__NG_CLI_RESOURCE__1]\r\n    })\r\n], HeaderComponent);\r\nexport { HeaderComponent };\r\n"]},"metadata":{},"sourceType":"module"}