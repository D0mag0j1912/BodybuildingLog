{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Development\\\\trainingApk\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./training-item.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./training-item.component.scss?ngResource\";\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input, ViewChildren } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { format } from 'date-fns';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { LocalStorageItems } from '../../../../models/common/interfaces/common.model';\nimport { SharedService } from '../../../../services/shared/shared.service';\nimport { UnsubscribeService } from '../../../../services/shared/unsubscribe.service';\nconst MAX_EXERCISE_NAME_WIDTH = 200;\nlet TrainingItemComponent = class TrainingItemComponent {\n  constructor(unsubscribeService, sharedService, changeDetectorRef, route, router) {\n    this.unsubscribeService = unsubscribeService;\n    this.sharedService = sharedService;\n    this.changeDetectorRef = changeDetectorRef;\n    this.route = route;\n    this.router = router;\n    this.weekDays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n    this.actions = ['delete', 'more'];\n    this.isTooltipDisabled = true;\n  }\n\n  set exerciseNameEls(exerciseNames) {\n    if (exerciseNames) {\n      setTimeout(() => {\n        exerciseNames.forEach(exerciseName => {\n          var _a;\n\n          if (((_a = exerciseName.nativeElement) === null || _a === void 0 ? void 0 : _a.offsetWidth) > MAX_EXERCISE_NAME_WIDTH || this.training.exercise.length > 2) {\n            this.isTooltipDisabled = false;\n          }\n        });\n        this.changeDetectorRef.markForCheck();\n      });\n    }\n  }\n\n  ngOnInit() {\n    //TODO: vrijeme ovdje ide 2 sata unaprijed (uskladiti s lokalnom zonom) - Zasad samo oduzimam 2 sata\n    this.timeCreated = format(this.sharedService.subtractTwoHours(new Date(this.training.createdAt)), 'HH:mm');\n    this.dayIndex = this.sharedService.subtractTwoHours(new Date(this.training.createdAt)).getDay();\n  }\n\n  trainingClicked() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.route.queryParams.pipe(tap( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (params) {\n          _this.sharedService.pastTrainingsQueryParams$$.next(params);\n\n          localStorage.setItem(LocalStorageItems.QUERY_PARAMS, JSON.stringify(params));\n          yield _this.router.navigate(['/training/new-training', _this.training._id]);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()), takeUntil(_this.unsubscribeService)).subscribe();\n    })();\n  }\n\n};\n\nTrainingItemComponent.ctorParameters = () => [{\n  type: UnsubscribeService\n}, {\n  type: SharedService\n}, {\n  type: ChangeDetectorRef\n}, {\n  type: ActivatedRoute\n}, {\n  type: Router\n}];\n\nTrainingItemComponent.propDecorators = {\n  training: [{\n    type: Input\n  }],\n  exerciseNameEls: [{\n    type: ViewChildren,\n    args: ['exerciseNameEl', {\n      read: ElementRef\n    }]\n  }]\n};\nTrainingItemComponent = __decorate([Component({\n  selector: 'bl-training-item',\n  template: __NG_CLI_RESOURCE__0,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [UnsubscribeService],\n  styles: [__NG_CLI_RESOURCE__1]\n})], TrainingItemComponent);\nexport { TrainingItemComponent };","map":{"version":3,"sources":["C:/Development/trainingApk/src/app/views/training/past-trainings/training-item/training-item.component.ts"],"names":["__decorate","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","ChangeDetectionStrategy","ChangeDetectorRef","Component","ElementRef","Input","ViewChildren","ActivatedRoute","Router","format","takeUntil","tap","LocalStorageItems","SharedService","UnsubscribeService","MAX_EXERCISE_NAME_WIDTH","TrainingItemComponent","constructor","unsubscribeService","sharedService","changeDetectorRef","route","router","weekDays","actions","isTooltipDisabled","exerciseNameEls","exerciseNames","setTimeout","forEach","exerciseName","_a","nativeElement","offsetWidth","training","exercise","length","markForCheck","ngOnInit","timeCreated","subtractTwoHours","Date","createdAt","dayIndex","getDay","trainingClicked","queryParams","pipe","params","pastTrainingsQueryParams$$","next","localStorage","setItem","QUERY_PARAMS","JSON","stringify","navigate","_id","subscribe","ctorParameters","type","propDecorators","args","read","selector","template","changeDetection","OnPush","providers","styles"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport __NG_CLI_RESOURCE__0 from \"./training-item.component.html?ngResource\";\r\nimport __NG_CLI_RESOURCE__1 from \"./training-item.component.scss?ngResource\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { format } from 'date-fns';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocalStorageItems } from '../../../../models/common/interfaces/common.model';\r\nimport { SharedService } from '../../../../services/shared/shared.service';\r\nimport { UnsubscribeService } from '../../../../services/shared/unsubscribe.service';\r\nconst MAX_EXERCISE_NAME_WIDTH = 200;\r\nlet TrainingItemComponent = class TrainingItemComponent {\r\n    constructor(unsubscribeService, sharedService, changeDetectorRef, route, router) {\r\n        this.unsubscribeService = unsubscribeService;\r\n        this.sharedService = sharedService;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.route = route;\r\n        this.router = router;\r\n        this.weekDays = [\r\n            'sunday',\r\n            'monday',\r\n            'tuesday',\r\n            'wednesday',\r\n            'thursday',\r\n            'friday',\r\n            'saturday',\r\n        ];\r\n        this.actions = [\r\n            'delete',\r\n            'more',\r\n        ];\r\n        this.isTooltipDisabled = true;\r\n    }\r\n    set exerciseNameEls(exerciseNames) {\r\n        if (exerciseNames) {\r\n            setTimeout(() => {\r\n                exerciseNames.forEach((exerciseName) => {\r\n                    var _a;\r\n                    if (((_a = exerciseName.nativeElement) === null || _a === void 0 ? void 0 : _a.offsetWidth) > MAX_EXERCISE_NAME_WIDTH || this.training.exercise.length > 2) {\r\n                        this.isTooltipDisabled = false;\r\n                    }\r\n                });\r\n                this.changeDetectorRef.markForCheck();\r\n            });\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        //TODO: vrijeme ovdje ide 2 sata unaprijed (uskladiti s lokalnom zonom) - Zasad samo oduzimam 2 sata\r\n        this.timeCreated = format(this.sharedService.subtractTwoHours(new Date(this.training.createdAt)), 'HH:mm');\r\n        this.dayIndex = this.sharedService.subtractTwoHours(new Date(this.training.createdAt)).getDay();\r\n    }\r\n    async trainingClicked() {\r\n        this.route.queryParams\r\n            .pipe(tap(async (params) => {\r\n            this.sharedService.pastTrainingsQueryParams$$.next(params);\r\n            localStorage.setItem(LocalStorageItems.QUERY_PARAMS, JSON.stringify(params));\r\n            await this.router.navigate(['/training/new-training', this.training._id]);\r\n        }), takeUntil(this.unsubscribeService))\r\n            .subscribe();\r\n    }\r\n};\r\nTrainingItemComponent.ctorParameters = () => [\r\n    { type: UnsubscribeService },\r\n    { type: SharedService },\r\n    { type: ChangeDetectorRef },\r\n    { type: ActivatedRoute },\r\n    { type: Router }\r\n];\r\nTrainingItemComponent.propDecorators = {\r\n    training: [{ type: Input }],\r\n    exerciseNameEls: [{ type: ViewChildren, args: ['exerciseNameEl', {\r\n                    read: ElementRef,\r\n                },] }]\r\n};\r\nTrainingItemComponent = __decorate([\r\n    Component({\r\n        selector: 'bl-training-item',\r\n        template: __NG_CLI_RESOURCE__0,\r\n        changeDetection: ChangeDetectionStrategy.OnPush,\r\n        providers: [UnsubscribeService],\r\n        styles: [__NG_CLI_RESOURCE__1]\r\n    })\r\n], TrainingItemComponent);\r\nexport { TrainingItemComponent };\r\n"]},"metadata":{},"sourceType":"module"}