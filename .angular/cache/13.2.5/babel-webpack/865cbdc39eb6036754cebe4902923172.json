{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Development\\\\trainingApk\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./past-trainings.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./past-trainings.component.scss?ngResource\";\nimport { DatePipe } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { addDays, format, getMonth, isSameDay, isSameMonth, isSameWeek, subDays } from 'date-fns';\nimport { utcToZonedTime } from 'date-fns-tz';\nimport { of } from 'rxjs';\nimport { map, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { SharedService } from 'src/app/services/shared/shared.service';\nimport { environment } from '../../../../environments/environment';\nimport { SPINNER_SIZE } from '../../../constants/spinner-size.const';\nimport { ALL_MONTHS } from '../../../helpers/months.helper';\nimport { mapStreamData } from '../../../helpers/training/past-trainings/map-stream-data.helper';\nimport { INITIAL_PAGE, DEFAULT_SIZE } from '../../../models/common/interfaces/paginator.model';\nimport { QUERY_PARAMS_DATE_FORMAT, TEMPLATE_DATE_FORMAT } from '../../../models/training/past-trainings/past-trainings.model';\nimport { UnsubscribeService } from '../../../services/shared/unsubscribe.service';\nimport { PastTrainingsService } from '../../../services/training/past-trainings.service';\nimport { isNeverCheck } from '../../../helpers/is-never-check.helper';\nvar Heights;\n\n(function (Heights) {\n  Heights[Heights[\"LOWER_WEEK_HEIGHT\"] = 275] = \"LOWER_WEEK_HEIGHT\";\n  Heights[Heights[\"HIGHER_WEEK_HEIGHT\"] = 305] = \"HIGHER_WEEK_HEIGHT\";\n  Heights[Heights[\"LOWER_SEARCH_HEIGHT\"] = 305] = \"LOWER_SEARCH_HEIGHT\";\n  Heights[Heights[\"HIGHER_SEARCH_HEIGHT\"] = 335] = \"HIGHER_SEARCH_HEIGHT\";\n})(Heights || (Heights = {}));\n\nlet PastTrainingsComponent = class PastTrainingsComponent {\n  constructor(pastTrainingsService, unsubscribeService, translateService, sharedService, changeDetectorRef, route, datePipe, router) {\n    var _a, _b, _c;\n\n    this.pastTrainingsService = pastTrainingsService;\n    this.unsubscribeService = unsubscribeService;\n    this.translateService = translateService;\n    this.sharedService = sharedService;\n    this.changeDetectorRef = changeDetectorRef;\n    this.route = route;\n    this.datePipe = datePipe;\n    this.router = router;\n    this.food = 3000;\n    this.pageSizeOptions = [1, 3, 5, 10];\n    this.size = DEFAULT_SIZE;\n    this.page = INITIAL_PAGE;\n    this.isNextPage = true;\n    this.isPreviousPage = true;\n    this.pastTrainings$ = undefined;\n    this.sharedService.deletedTraining$$.pipe(takeUntil(this.unsubscribeService)).subscribe(response => {\n      this.pastTrainings$ = of(response).pipe(mapStreamData());\n      this.changeDetectorRef.markForCheck();\n    });\n    this.page = ((_a = this.route.snapshot.queryParamMap) === null || _a === void 0 ? void 0 : _a.get('page')) ? +this.route.snapshot.queryParamMap.get('page') : INITIAL_PAGE;\n    this.size = ((_b = this.route.snapshot.queryParamMap) === null || _b === void 0 ? void 0 : _b.get('size')) ? +this.route.snapshot.queryParamMap.get('size') : DEFAULT_SIZE;\n    const searchFilter = (_c = this.route.snapshot.queryParamMap) === null || _c === void 0 ? void 0 : _c.get('search');\n\n    if (searchFilter) {\n      this.pastTrainings$ = this.pastTrainingsService.searchPastTrainings(searchFilter.trim().toLowerCase(), this.size, this.page).pipe(tap(x => this.handleArrows(x)), mapStreamData());\n    } else {\n      this.pastTrainings$ = this.pastTrainingsService.getPastTrainings(this.getDateTimeQueryParams()).pipe(tap(response => this.handleArrows(response)), mapStreamData());\n    }\n  }\n\n  set timePeriodEl(timePeriodElement) {\n    var _a;\n\n    if (timePeriodElement) {\n      const trainingElement = (_a = this.trainingItemWrapper) === null || _a === void 0 ? void 0 : _a.nativeElement;\n\n      if (trainingElement) {\n        this.isSearch$.pipe(takeUntil(this.unsubscribeService)).subscribe(isSearch => {\n          if (timePeriodElement.nativeElement.offsetHeight === 30) {\n            trainingElement.style.maxHeight = `calc(100vh - ${isSearch ? Heights.LOWER_SEARCH_HEIGHT : Heights.LOWER_WEEK_HEIGHT}px)`;\n          } else if (timePeriodElement.nativeElement.offsetHeight > 30) {\n            trainingElement.style.maxHeight = `calc(100vh - ${isSearch ? Heights.HIGHER_SEARCH_HEIGHT : Heights.HIGHER_WEEK_HEIGHT}px)`;\n          }\n        });\n      }\n    }\n  }\n\n  get spinnerSize() {\n    return SPINNER_SIZE;\n  }\n\n  get dateFormat() {\n    return TEMPLATE_DATE_FORMAT;\n  }\n\n  get maxTrainingsPerPage() {\n    return DEFAULT_SIZE;\n  }\n\n  get isSearch$() {\n    return this.route.queryParamMap.pipe(map(params => !!(params === null || params === void 0 ? void 0 : params.get('search'))));\n  }\n\n  searchEmitted($event) {\n    var _this = this;\n\n    this.page = INITIAL_PAGE;\n    this.pastTrainings$ = of($event).pipe(switchMap(value => this.pastTrainingsService.searchPastTrainings(value, this.size, this.page).pipe(tap( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        _this.updatePageAndSize(response);\n\n        yield _this.router.navigate([], {\n          relativeTo: _this.route,\n          queryParams: _this.handleQueryParams(response, $event.trim() !== '' ? $event.trim() : undefined)\n        });\n\n        _this.handleArrows(response);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()), mapStreamData())));\n  }\n\n  onPaginatorChanged($event) {\n    var _this2 = this;\n\n    var _a, _b, _c, _d;\n\n    if ($event === null || $event === void 0 ? void 0 : $event.IsSearch) {\n      const currentSearchValue = (_b = (_a = this.route.snapshot.queryParamMap) === null || _a === void 0 ? void 0 : _a.get('search')) !== null && _b !== void 0 ? _b : undefined;\n      this.pastTrainings$ = this.pastTrainingsService.searchPastTrainings((_d = (_c = currentSearchValue === null || currentSearchValue === void 0 ? void 0 : currentSearchValue.trim()) === null || _c === void 0 ? void 0 : _c.toLowerCase()) !== null && _d !== void 0 ? _d : '', $event.Size, $event.Page).pipe(tap( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (response) {\n          _this2.updatePageAndSize(response);\n\n          yield _this2.router.navigate([], {\n            relativeTo: _this2.route,\n            queryParams: _this2.handleQueryParams(response, currentSearchValue)\n          });\n\n          _this2.handleArrows(response);\n        });\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }()), mapStreamData());\n    } else {\n      this.pastTrainings$ = this.pastTrainingsService.getPastTrainings(this.calculateDate($event.PageType, $event.DateInterval, $event.EarliestTrainingDate)).pipe(tap( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (response) {\n          _this2.handleArrows(response);\n\n          yield _this2.router.navigate([], {\n            relativeTo: _this2.route,\n            queryParams: _this2.handleQueryParams(response)\n          });\n        });\n\n        return function (_x3) {\n          return _ref3.apply(this, arguments);\n        };\n      }()), mapStreamData());\n    }\n  }\n\n  tryAgain() {\n    this.pastTrainings$ = this.pastTrainingsService.getPastTrainings(this.getDateTimeQueryParams()).pipe(mapStreamData());\n  }\n\n  setTimePeriod(dateInterval) {\n    const isDay = isSameDay(dateInterval.StartDate, dateInterval.EndDate);\n\n    if (isDay) {\n      return this.translateService.stream(`common.day`).pipe(map(value => this.generateHeaderTitle(value, dateInterval.StartDate)));\n    }\n\n    const isWeek = isSameWeek(dateInterval.StartDate, dateInterval.EndDate, {\n      weekStartsOn: 1\n    });\n\n    if (isWeek) {\n      return this.translateService.stream('common.week').pipe(map(value => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\n    }\n\n    const isMonth = isSameMonth(dateInterval.StartDate, dateInterval.EndDate);\n\n    if (isMonth) {\n      const month = getMonth(dateInterval.StartDate);\n      return this.translateService.stream(`common.months.${ALL_MONTHS[month]}`).pipe(map(value => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\n    }\n\n    return this.translateService.stream('common.period').pipe(map(value => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\n  }\n\n  updatePageAndSize(response) {\n    var _a, _b, _c, _d;\n\n    this.page = (_b = (_a = response === null || response === void 0 ? void 0 : response.Value) === null || _a === void 0 ? void 0 : _a.CurrentPage) !== null && _b !== void 0 ? _b : INITIAL_PAGE;\n    this.size = (_d = (_c = response === null || response === void 0 ? void 0 : response.Value) === null || _c === void 0 ? void 0 : _c.Size) !== null && _d !== void 0 ? _d : DEFAULT_SIZE;\n    this.changeDetectorRef.markForCheck();\n  }\n\n  calculateDate(page, dateInterval, earliestTrainingDate) {\n    switch (page) {\n      case 'Previous':\n        {\n          return subDays(utcToZonedTime(dateInterval.StartDate, environment.TIMEZONE), 7);\n        }\n\n      case 'Next':\n        {\n          return addDays(utcToZonedTime(dateInterval.StartDate, environment.TIMEZONE), 7);\n        }\n\n      case 'First':\n        {\n          return earliestTrainingDate;\n        }\n\n      case 'Last':\n        {\n          return new Date();\n        }\n\n      default:\n        return isNeverCheck(page);\n    }\n  }\n\n  handleQueryParams(trainingData, searchValue) {\n    return {\n      startDate: this.handleSpecificQueryParam(searchValue, trainingData, 'startDate'),\n      endDate: this.handleSpecificQueryParam(searchValue, trainingData, 'endDate'),\n      search: searchValue !== null && searchValue !== void 0 ? searchValue : undefined,\n      page: this.handleSpecificQueryParam(searchValue, trainingData, 'page'),\n      size: this.handleSpecificQueryParam(searchValue, trainingData, 'size')\n    };\n  }\n\n  handleSpecificQueryParam(searchValue, trainingData, queryParam) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n\n    if (searchValue) {\n      if (((_a = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _a === void 0 ? void 0 : _a.TotalCount) > 0) {\n        if (queryParam === 'page') {\n          return this.page.toString();\n        } else if (queryParam === 'startDate') {\n          return format(utcToZonedTime((_e = (_d = (_c = (_b = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _b === void 0 ? void 0 : _b.Results) === null || _c === void 0 ? void 0 : _c.Dates) === null || _d === void 0 ? void 0 : _d.StartDate) !== null && _e !== void 0 ? _e : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\n        } else if (queryParam === 'endDate') {\n          return format(utcToZonedTime((_j = (_h = (_g = (_f = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _f === void 0 ? void 0 : _f.Results) === null || _g === void 0 ? void 0 : _g.Dates) === null || _h === void 0 ? void 0 : _h.EndDate) !== null && _j !== void 0 ? _j : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\n        } else {\n          return this.size.toString();\n        }\n      } else {\n        return undefined;\n      }\n    } else {\n      if (queryParam === 'startDate') {\n        return format(utcToZonedTime((_o = (_m = (_l = (_k = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _k === void 0 ? void 0 : _k.Results) === null || _l === void 0 ? void 0 : _l.Dates) === null || _m === void 0 ? void 0 : _m.StartDate) !== null && _o !== void 0 ? _o : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\n      } else if (queryParam === 'endDate') {\n        return format(utcToZonedTime((_s = (_r = (_q = (_p = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _p === void 0 ? void 0 : _p.Results) === null || _q === void 0 ? void 0 : _q.Dates) === null || _r === void 0 ? void 0 : _r.EndDate) !== null && _s !== void 0 ? _s : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\n      } else {\n        return undefined;\n      }\n    }\n  }\n\n  handleArrows(x) {\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    if (((_a = x === null || x === void 0 ? void 0 : x.Value) === null || _a === void 0 ? void 0 : _a.TotalCount) <= DEFAULT_SIZE) {\n      this.isNextPage = false;\n      this.isPreviousPage = false;\n    } else {\n      this.isPreviousPage = !!((_b = x === null || x === void 0 ? void 0 : x.Value) === null || _b === void 0 ? void 0 : _b.Previous);\n      this.isNextPage = !!((_c = x === null || x === void 0 ? void 0 : x.Value) === null || _c === void 0 ? void 0 : _c.Next);\n    }\n\n    if (((_e = (_d = x === null || x === void 0 ? void 0 : x.Value) === null || _d === void 0 ? void 0 : _d.Results) === null || _e === void 0 ? void 0 : _e.IsPreviousWeek) !== undefined && ((_g = (_f = x === null || x === void 0 ? void 0 : x.Value) === null || _f === void 0 ? void 0 : _f.Results) === null || _g === void 0 ? void 0 : _g.IsNextWeek) !== undefined) {\n      this.isNextPage = x.Value.Results.IsNextWeek;\n      this.isPreviousPage = x.Value.Results.IsPreviousWeek;\n    }\n\n    this.changeDetectorRef.markForCheck();\n  }\n\n  getDateTimeQueryParams() {\n    var _a, _b, _c;\n\n    const splittedDate = (_c = (_b = (_a = this.route.snapshot.queryParams) === null || _a === void 0 ? void 0 : _a.startDate) === null || _b === void 0 ? void 0 : _b.split('-')) !== null && _c !== void 0 ? _c : [];\n    const utc = splittedDate.length > 0 ? new Date(`${splittedDate[2]}-${splittedDate[1]}-${splittedDate[0]}`).toUTCString() : new Date().toUTCString();\n    return utcToZonedTime(new Date(utc), environment.TIMEZONE);\n  }\n\n  generateHeaderTitle(period, startDate, endDate) {\n    if (endDate) {\n      return `\n                <strong class=\"header-title--key\">${period}</strong>\n                <span class=\"header-title--value\">(${this.datePipe.transform(startDate, this.dateFormat)} - ${this.datePipe.transform(endDate, this.dateFormat)})</span>`;\n    } else {\n      return `<strong class=\"header-title--key\">${period}</strong>\n                <span class=\"header-title--value\">(${this.datePipe.transform(startDate, this.dateFormat)})</span`;\n    }\n  }\n\n};\n\nPastTrainingsComponent.ctorParameters = () => [{\n  type: PastTrainingsService\n}, {\n  type: UnsubscribeService\n}, {\n  type: TranslateService\n}, {\n  type: SharedService\n}, {\n  type: ChangeDetectorRef\n}, {\n  type: ActivatedRoute\n}, {\n  type: DatePipe\n}, {\n  type: Router\n}];\n\nPastTrainingsComponent.propDecorators = {\n  trainingItemWrapper: [{\n    type: ViewChild,\n    args: ['itemWrapper', {\n      read: ElementRef\n    }]\n  }],\n  timePeriodEl: [{\n    type: ViewChild,\n    args: ['timePeriod', {\n      read: ElementRef\n    }]\n  }]\n};\nPastTrainingsComponent = __decorate([Component({\n  selector: 'bl-past-trainings',\n  template: __NG_CLI_RESOURCE__0,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [UnsubscribeService],\n  styles: [__NG_CLI_RESOURCE__1]\n})], PastTrainingsComponent);\nexport { PastTrainingsComponent };","map":{"version":3,"sources":["C:/Development/trainingApk/src/app/views/training/past-trainings/past-trainings.component.ts"],"names":["__decorate","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","DatePipe","ChangeDetectionStrategy","ChangeDetectorRef","Component","ElementRef","ViewChild","ActivatedRoute","Router","TranslateService","addDays","format","getMonth","isSameDay","isSameMonth","isSameWeek","subDays","utcToZonedTime","of","map","switchMap","takeUntil","tap","SharedService","environment","SPINNER_SIZE","ALL_MONTHS","mapStreamData","INITIAL_PAGE","DEFAULT_SIZE","QUERY_PARAMS_DATE_FORMAT","TEMPLATE_DATE_FORMAT","UnsubscribeService","PastTrainingsService","isNeverCheck","Heights","PastTrainingsComponent","constructor","pastTrainingsService","unsubscribeService","translateService","sharedService","changeDetectorRef","route","datePipe","router","_a","_b","_c","food","pageSizeOptions","size","page","isNextPage","isPreviousPage","pastTrainings$","undefined","deletedTraining$$","pipe","subscribe","response","markForCheck","snapshot","queryParamMap","get","searchFilter","searchPastTrainings","trim","toLowerCase","x","handleArrows","getPastTrainings","getDateTimeQueryParams","timePeriodEl","timePeriodElement","trainingElement","trainingItemWrapper","nativeElement","isSearch$","isSearch","offsetHeight","style","maxHeight","LOWER_SEARCH_HEIGHT","LOWER_WEEK_HEIGHT","HIGHER_SEARCH_HEIGHT","HIGHER_WEEK_HEIGHT","spinnerSize","dateFormat","maxTrainingsPerPage","params","searchEmitted","$event","value","updatePageAndSize","navigate","relativeTo","queryParams","handleQueryParams","onPaginatorChanged","_d","IsSearch","currentSearchValue","Size","Page","calculateDate","PageType","DateInterval","EarliestTrainingDate","tryAgain","setTimePeriod","dateInterval","isDay","StartDate","EndDate","stream","generateHeaderTitle","isWeek","weekStartsOn","isMonth","month","Value","CurrentPage","earliestTrainingDate","TIMEZONE","Date","trainingData","searchValue","startDate","handleSpecificQueryParam","endDate","search","queryParam","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","TotalCount","toString","Results","Dates","Previous","Next","IsPreviousWeek","IsNextWeek","splittedDate","split","utc","length","toUTCString","period","transform","ctorParameters","type","propDecorators","args","read","selector","template","changeDetection","OnPush","providers","styles"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport __NG_CLI_RESOURCE__0 from \"./past-trainings.component.html?ngResource\";\r\nimport __NG_CLI_RESOURCE__1 from \"./past-trainings.component.scss?ngResource\";\r\nimport { DatePipe } from '@angular/common';\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { addDays, format, getMonth, isSameDay, isSameMonth, isSameWeek, subDays } from 'date-fns';\r\nimport { utcToZonedTime } from 'date-fns-tz';\r\nimport { of } from 'rxjs';\r\nimport { map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { SharedService } from 'src/app/services/shared/shared.service';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { SPINNER_SIZE } from '../../../constants/spinner-size.const';\r\nimport { ALL_MONTHS } from '../../../helpers/months.helper';\r\nimport { mapStreamData } from '../../../helpers/training/past-trainings/map-stream-data.helper';\r\nimport { INITIAL_PAGE, DEFAULT_SIZE } from '../../../models/common/interfaces/paginator.model';\r\nimport { QUERY_PARAMS_DATE_FORMAT, TEMPLATE_DATE_FORMAT } from '../../../models/training/past-trainings/past-trainings.model';\r\nimport { UnsubscribeService } from '../../../services/shared/unsubscribe.service';\r\nimport { PastTrainingsService } from '../../../services/training/past-trainings.service';\r\nimport { isNeverCheck } from '../../../helpers/is-never-check.helper';\r\nvar Heights;\r\n(function (Heights) {\r\n    Heights[Heights[\"LOWER_WEEK_HEIGHT\"] = 275] = \"LOWER_WEEK_HEIGHT\";\r\n    Heights[Heights[\"HIGHER_WEEK_HEIGHT\"] = 305] = \"HIGHER_WEEK_HEIGHT\";\r\n    Heights[Heights[\"LOWER_SEARCH_HEIGHT\"] = 305] = \"LOWER_SEARCH_HEIGHT\";\r\n    Heights[Heights[\"HIGHER_SEARCH_HEIGHT\"] = 335] = \"HIGHER_SEARCH_HEIGHT\";\r\n})(Heights || (Heights = {}));\r\nlet PastTrainingsComponent = class PastTrainingsComponent {\r\n    constructor(pastTrainingsService, unsubscribeService, translateService, sharedService, changeDetectorRef, route, datePipe, router) {\r\n        var _a, _b, _c;\r\n        this.pastTrainingsService = pastTrainingsService;\r\n        this.unsubscribeService = unsubscribeService;\r\n        this.translateService = translateService;\r\n        this.sharedService = sharedService;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.route = route;\r\n        this.datePipe = datePipe;\r\n        this.router = router;\r\n        this.food = 3000;\r\n        this.pageSizeOptions = [1, 3, 5, 10];\r\n        this.size = DEFAULT_SIZE;\r\n        this.page = INITIAL_PAGE;\r\n        this.isNextPage = true;\r\n        this.isPreviousPage = true;\r\n        this.pastTrainings$ = undefined;\r\n        this.sharedService.deletedTraining$$.pipe(takeUntil(this.unsubscribeService)).subscribe((response) => {\r\n            this.pastTrainings$ =\r\n                of(response)\r\n                    .pipe(mapStreamData());\r\n            this.changeDetectorRef.markForCheck();\r\n        });\r\n        this.page = ((_a = this.route.snapshot.queryParamMap) === null || _a === void 0 ? void 0 : _a.get('page')) ? +this.route.snapshot.queryParamMap.get('page') : INITIAL_PAGE;\r\n        this.size = ((_b = this.route.snapshot.queryParamMap) === null || _b === void 0 ? void 0 : _b.get('size')) ? +this.route.snapshot.queryParamMap.get('size') : DEFAULT_SIZE;\r\n        const searchFilter = (_c = this.route.snapshot.queryParamMap) === null || _c === void 0 ? void 0 : _c.get('search');\r\n        if (searchFilter) {\r\n            this.pastTrainings$ =\r\n                this.pastTrainingsService.searchPastTrainings(searchFilter.trim().toLowerCase(), this.size, this.page).pipe(tap((x) => this.handleArrows(x)), mapStreamData());\r\n        }\r\n        else {\r\n            this.pastTrainings$ = this.pastTrainingsService.getPastTrainings(this.getDateTimeQueryParams())\r\n                .pipe(tap((response) => this.handleArrows(response)), mapStreamData());\r\n        }\r\n    }\r\n    set timePeriodEl(timePeriodElement) {\r\n        var _a;\r\n        if (timePeriodElement) {\r\n            const trainingElement = (_a = this.trainingItemWrapper) === null || _a === void 0 ? void 0 : _a.nativeElement;\r\n            if (trainingElement) {\r\n                this.isSearch$\r\n                    .pipe(takeUntil(this.unsubscribeService))\r\n                    .subscribe((isSearch) => {\r\n                    if (timePeriodElement.nativeElement.offsetHeight === 30) {\r\n                        trainingElement.style.maxHeight = `calc(100vh - ${isSearch ? Heights.LOWER_SEARCH_HEIGHT : Heights.LOWER_WEEK_HEIGHT}px)`;\r\n                    }\r\n                    else if (timePeriodElement.nativeElement.offsetHeight > 30) {\r\n                        trainingElement.style.maxHeight = `calc(100vh - ${isSearch ? Heights.HIGHER_SEARCH_HEIGHT : Heights.HIGHER_WEEK_HEIGHT}px)`;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    get spinnerSize() {\r\n        return SPINNER_SIZE;\r\n    }\r\n    get dateFormat() {\r\n        return TEMPLATE_DATE_FORMAT;\r\n    }\r\n    get maxTrainingsPerPage() {\r\n        return DEFAULT_SIZE;\r\n    }\r\n    get isSearch$() {\r\n        return this.route.queryParamMap\r\n            .pipe(map((params) => !!(params === null || params === void 0 ? void 0 : params.get('search'))));\r\n    }\r\n    searchEmitted($event) {\r\n        this.page = INITIAL_PAGE;\r\n        this.pastTrainings$ =\r\n            of($event)\r\n                .pipe(switchMap((value) => this.pastTrainingsService.searchPastTrainings(value, this.size, this.page).pipe(tap(async (response) => {\r\n                this.updatePageAndSize(response);\r\n                await this.router.navigate([], {\r\n                    relativeTo: this.route,\r\n                    queryParams: this.handleQueryParams(response, $event.trim() !== '' ? $event.trim() : undefined),\r\n                });\r\n                this.handleArrows(response);\r\n            }), mapStreamData())));\r\n    }\r\n    onPaginatorChanged($event) {\r\n        var _a, _b, _c, _d;\r\n        if ($event === null || $event === void 0 ? void 0 : $event.IsSearch) {\r\n            const currentSearchValue = (_b = (_a = this.route.snapshot.queryParamMap) === null || _a === void 0 ? void 0 : _a.get('search')) !== null && _b !== void 0 ? _b : undefined;\r\n            this.pastTrainings$ =\r\n                this.pastTrainingsService.searchPastTrainings((_d = (_c = currentSearchValue === null || currentSearchValue === void 0 ? void 0 : currentSearchValue.trim()) === null || _c === void 0 ? void 0 : _c.toLowerCase()) !== null && _d !== void 0 ? _d : '', $event.Size, $event.Page).pipe(tap(async (response) => {\r\n                    this.updatePageAndSize(response);\r\n                    await this.router.navigate([], {\r\n                        relativeTo: this.route,\r\n                        queryParams: this.handleQueryParams(response, currentSearchValue),\r\n                    });\r\n                    this.handleArrows(response);\r\n                }), mapStreamData());\r\n        }\r\n        else {\r\n            this.pastTrainings$ =\r\n                this.pastTrainingsService.getPastTrainings(this.calculateDate($event.PageType, $event.DateInterval, $event.EarliestTrainingDate))\r\n                    .pipe(tap(async (response) => {\r\n                    this.handleArrows(response);\r\n                    await this.router.navigate([], {\r\n                        relativeTo: this.route,\r\n                        queryParams: this.handleQueryParams(response),\r\n                    });\r\n                }), mapStreamData());\r\n        }\r\n    }\r\n    tryAgain() {\r\n        this.pastTrainings$ = this.pastTrainingsService.getPastTrainings(this.getDateTimeQueryParams())\r\n            .pipe(mapStreamData());\r\n    }\r\n    setTimePeriod(dateInterval) {\r\n        const isDay = isSameDay(dateInterval.StartDate, dateInterval.EndDate);\r\n        if (isDay) {\r\n            return this.translateService.stream(`common.day`)\r\n                .pipe(map((value) => this.generateHeaderTitle(value, dateInterval.StartDate)));\r\n        }\r\n        const isWeek = isSameWeek(dateInterval.StartDate, dateInterval.EndDate, { weekStartsOn: 1 });\r\n        if (isWeek) {\r\n            return this.translateService.stream('common.week')\r\n                .pipe(map((value) => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\r\n        }\r\n        const isMonth = isSameMonth(dateInterval.StartDate, dateInterval.EndDate);\r\n        if (isMonth) {\r\n            const month = getMonth(dateInterval.StartDate);\r\n            return this.translateService.stream(`common.months.${ALL_MONTHS[month]}`)\r\n                .pipe(map((value) => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\r\n        }\r\n        return this.translateService.stream('common.period')\r\n            .pipe(map((value) => this.generateHeaderTitle(value, dateInterval.StartDate, dateInterval.EndDate)));\r\n    }\r\n    updatePageAndSize(response) {\r\n        var _a, _b, _c, _d;\r\n        this.page = (_b = (_a = response === null || response === void 0 ? void 0 : response.Value) === null || _a === void 0 ? void 0 : _a.CurrentPage) !== null && _b !== void 0 ? _b : INITIAL_PAGE;\r\n        this.size = (_d = (_c = response === null || response === void 0 ? void 0 : response.Value) === null || _c === void 0 ? void 0 : _c.Size) !== null && _d !== void 0 ? _d : DEFAULT_SIZE;\r\n        this.changeDetectorRef.markForCheck();\r\n    }\r\n    calculateDate(page, dateInterval, earliestTrainingDate) {\r\n        switch (page) {\r\n            case 'Previous': {\r\n                return subDays(utcToZonedTime(dateInterval.StartDate, environment.TIMEZONE), 7);\r\n            }\r\n            case 'Next': {\r\n                return addDays(utcToZonedTime(dateInterval.StartDate, environment.TIMEZONE), 7);\r\n            }\r\n            case 'First': {\r\n                return earliestTrainingDate;\r\n            }\r\n            case 'Last': {\r\n                return new Date();\r\n            }\r\n            default:\r\n                return isNeverCheck(page);\r\n        }\r\n    }\r\n    handleQueryParams(trainingData, searchValue) {\r\n        return {\r\n            startDate: this.handleSpecificQueryParam(searchValue, trainingData, 'startDate'),\r\n            endDate: this.handleSpecificQueryParam(searchValue, trainingData, 'endDate'),\r\n            search: searchValue !== null && searchValue !== void 0 ? searchValue : undefined,\r\n            page: this.handleSpecificQueryParam(searchValue, trainingData, 'page'),\r\n            size: this.handleSpecificQueryParam(searchValue, trainingData, 'size'),\r\n        };\r\n    }\r\n    handleSpecificQueryParam(searchValue, trainingData, queryParam) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\r\n        if (searchValue) {\r\n            if (((_a = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _a === void 0 ? void 0 : _a.TotalCount) > 0) {\r\n                if (queryParam === 'page') {\r\n                    return this.page.toString();\r\n                }\r\n                else if (queryParam === 'startDate') {\r\n                    return format(utcToZonedTime((_e = (_d = (_c = (_b = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _b === void 0 ? void 0 : _b.Results) === null || _c === void 0 ? void 0 : _c.Dates) === null || _d === void 0 ? void 0 : _d.StartDate) !== null && _e !== void 0 ? _e : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\r\n                }\r\n                else if (queryParam === 'endDate') {\r\n                    return format(utcToZonedTime((_j = (_h = (_g = (_f = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _f === void 0 ? void 0 : _f.Results) === null || _g === void 0 ? void 0 : _g.Dates) === null || _h === void 0 ? void 0 : _h.EndDate) !== null && _j !== void 0 ? _j : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\r\n                }\r\n                else {\r\n                    return this.size.toString();\r\n                }\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        }\r\n        else {\r\n            if (queryParam === 'startDate') {\r\n                return format(utcToZonedTime((_o = (_m = (_l = (_k = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _k === void 0 ? void 0 : _k.Results) === null || _l === void 0 ? void 0 : _l.Dates) === null || _m === void 0 ? void 0 : _m.StartDate) !== null && _o !== void 0 ? _o : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\r\n            }\r\n            else if (queryParam === 'endDate') {\r\n                return format(utcToZonedTime((_s = (_r = (_q = (_p = trainingData === null || trainingData === void 0 ? void 0 : trainingData.Value) === null || _p === void 0 ? void 0 : _p.Results) === null || _q === void 0 ? void 0 : _q.Dates) === null || _r === void 0 ? void 0 : _r.EndDate) !== null && _s !== void 0 ? _s : new Date(), environment.TIMEZONE), QUERY_PARAMS_DATE_FORMAT);\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        }\r\n    }\r\n    handleArrows(x) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        if (((_a = x === null || x === void 0 ? void 0 : x.Value) === null || _a === void 0 ? void 0 : _a.TotalCount) <= DEFAULT_SIZE) {\r\n            this.isNextPage = false;\r\n            this.isPreviousPage = false;\r\n        }\r\n        else {\r\n            this.isPreviousPage = !!((_b = x === null || x === void 0 ? void 0 : x.Value) === null || _b === void 0 ? void 0 : _b.Previous);\r\n            this.isNextPage = !!((_c = x === null || x === void 0 ? void 0 : x.Value) === null || _c === void 0 ? void 0 : _c.Next);\r\n        }\r\n        if (((_e = (_d = x === null || x === void 0 ? void 0 : x.Value) === null || _d === void 0 ? void 0 : _d.Results) === null || _e === void 0 ? void 0 : _e.IsPreviousWeek) !== undefined && ((_g = (_f = x === null || x === void 0 ? void 0 : x.Value) === null || _f === void 0 ? void 0 : _f.Results) === null || _g === void 0 ? void 0 : _g.IsNextWeek) !== undefined) {\r\n            this.isNextPage = x.Value.Results.IsNextWeek;\r\n            this.isPreviousPage = x.Value.Results.IsPreviousWeek;\r\n        }\r\n        this.changeDetectorRef.markForCheck();\r\n    }\r\n    getDateTimeQueryParams() {\r\n        var _a, _b, _c;\r\n        const splittedDate = (_c = (_b = (_a = this.route.snapshot.queryParams) === null || _a === void 0 ? void 0 : _a.startDate) === null || _b === void 0 ? void 0 : _b.split('-')) !== null && _c !== void 0 ? _c : [];\r\n        const utc = splittedDate.length > 0 ? new Date(`${splittedDate[2]}-${splittedDate[1]}-${splittedDate[0]}`).toUTCString() : new Date().toUTCString();\r\n        return utcToZonedTime(new Date(utc), environment.TIMEZONE);\r\n    }\r\n    generateHeaderTitle(period, startDate, endDate) {\r\n        if (endDate) {\r\n            return `\r\n                <strong class=\"header-title--key\">${period}</strong>\r\n                <span class=\"header-title--value\">(${this.datePipe.transform(startDate, this.dateFormat)} - ${this.datePipe.transform(endDate, this.dateFormat)})</span>`;\r\n        }\r\n        else {\r\n            return `<strong class=\"header-title--key\">${period}</strong>\r\n                <span class=\"header-title--value\">(${this.datePipe.transform(startDate, this.dateFormat)})</span`;\r\n        }\r\n    }\r\n};\r\nPastTrainingsComponent.ctorParameters = () => [\r\n    { type: PastTrainingsService },\r\n    { type: UnsubscribeService },\r\n    { type: TranslateService },\r\n    { type: SharedService },\r\n    { type: ChangeDetectorRef },\r\n    { type: ActivatedRoute },\r\n    { type: DatePipe },\r\n    { type: Router }\r\n];\r\nPastTrainingsComponent.propDecorators = {\r\n    trainingItemWrapper: [{ type: ViewChild, args: ['itemWrapper', { read: ElementRef },] }],\r\n    timePeriodEl: [{ type: ViewChild, args: ['timePeriod', { read: ElementRef },] }]\r\n};\r\nPastTrainingsComponent = __decorate([\r\n    Component({\r\n        selector: 'bl-past-trainings',\r\n        template: __NG_CLI_RESOURCE__0,\r\n        changeDetection: ChangeDetectionStrategy.OnPush,\r\n        providers: [UnsubscribeService],\r\n        styles: [__NG_CLI_RESOURCE__1]\r\n    })\r\n], PastTrainingsComponent);\r\nexport { PastTrainingsComponent };\r\n"]},"metadata":{},"sourceType":"module"}