<ion-header>
    <ion-toolbar
        color="primary"
        class="toolbar-title">
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>{{ 'navigation.login' | translate }}</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>
    <ion-card>
        <ion-card-content>
            <form
                [formGroup]="form"
                (ngSubmit)="onSubmit()">
                <ion-item lines="undefined">
                    <ion-label position="floating">
                        {{ 'auth.email' | translate }}
                    </ion-label>
                    <ion-input
                        autofocus
                        type="email"
                        formControlName="email"></ion-input>
                </ion-item>
                <span
                    *ngIf="accessFormData('email').errors?.required &&
                        (accessFormData('email').dirty || accessFormData('email').touched)"
                    slot="error">
                    {{ 'auth.errors.email_required' | translate }}
                </span>
                <span
                    *ngIf="accessFormData('email').errors?.email &&
                        !accessFormData('email').errors?.required"
                    slot="error">
                    {{ 'auth.errors.invalid_email' | translate }}
                </span>
                <ion-item lines="full">
                    <ion-label position="floating">
                        {{ 'auth.password' | translate }}
                    </ion-label>
                    <ion-input
                        #inputPassword
                        type="password"
                        formControlName="password"></ion-input>
                </ion-item>
                <span
                    *ngIf="accessFormData('password').errors?.required &&
                        (accessFormData('password').dirty || accessFormData('password').touched)">
                    {{ 'auth.errors.password_required' | translate }}
                </span>
                <span
                    *ngIf="accessFormData('password').errors?.minlength
                        || accessFormData('password').errors?.maxlength">
                    {{ 'auth.errors.password_length' | translate }}
                </span>
                <span
                    *ngIf="form.errors?.passwordFitsEmail
                        && !accessFormData('password').errors?.required
                        && !accessFormData('password').errors?.minlength
                        && !accessFormData('password').errors?.maxlength">
                    {{ 'auth.errors.password_wrong_email' | translate }}
                </span>
                <div class="submit-area">
                    <ion-button
                        type="submit"
                        color="primary"
                        [disabled]="!form.valid || isLoading"
                        [class.button-spinner]="isLoading">
                        {{ 'auth.login' | translate }}
                    </ion-button>
                    <span class="no_account_message">
                        {{ 'auth.no_account_message' | translate }}
                        <a
                            class="no-account-link"
                            routerLink="/auth/signup">
                            {{ 'auth.signup_link' | translate }}
                        </a>
                        {{ 'common.here' | translate }}
                    </span>
                </div>
            </form>
        </ion-card-content>
    </ion-card>
</ion-content>

